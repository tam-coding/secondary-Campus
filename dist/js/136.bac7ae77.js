"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[136],{3136:function(e,t,o){o.r(t),o.d(t,{default:function(){return n}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"index-header"},[t("el-row",{staticStyle:{width:"80%",margin:"0 auto","padding-top":"80px","margin-bottom":"40px"}},[t("el-col",[t("h2",[e._v("闲置卖钱：")]),t("el-card",{attrs:{shadow:"always"}},[t("el-form",{ref:"ruleForm",attrs:{"label-position":"top","label-width":"80px",model:e.submitGoodsForm,rules:e.rules}},[t("el-col",{attrs:{span:18,offset:2}},[t("el-form-item",{attrs:{label:"商品图",enctype:"multipart/form-data",prop:"goodsImages"}},[t("el-upload",{attrs:{"on-remove":e.handleRemove,multiple:"",action:"/web/file/upload","list-type":"picture-card",accept:"image/*",data:e.uploadData,headers:e.headers,limit:4,"on-preview":e.handlePictureCardPreview,"on-success":e.submitSuccess,"before-upload":e.handleBeforeUpload}},[t("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),t("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1),t("el-col",{staticStyle:{"margin-top":"50px"},attrs:{span:9,offset:2}},[t("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[t("el-input",{attrs:{maxlength:"25","show-word-limit":""},model:{value:e.submitGoodsForm.name,callback:function(t){e.$set(e.submitGoodsForm,"name",t)},expression:"submitGoodsForm.name"}})],1)],1),t("el-col",{staticStyle:{"margin-top":"50px"},attrs:{span:9,offset:2}},[t("el-form-item",{attrs:{label:"商品价格",prop:"price"}},[t("el-input",{model:{value:e.submitGoodsForm.price,callback:function(t){e.$set(e.submitGoodsForm,"price",t)},expression:"submitGoodsForm.price"}})],1)],1),t("el-col",{staticStyle:{"margin-top":"20px"},attrs:{span:9,offset:2}},[t("el-form-item",{attrs:{label:"商品介绍",prop:"description"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:8},placeholder:"请输入内容",maxlength:"100","show-word-limit":""},model:{value:e.submitGoodsForm.description,callback:function(t){e.$set(e.submitGoodsForm,"description",t)},expression:"submitGoodsForm.description"}})],1)],1),t("el-col",{staticStyle:{"margin-top":"20px"},attrs:{span:9,offset:2}},[t("el-form-item",{attrs:{label:"商品分类",prop:"goodsSortId"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.submitGoodsForm.goodsSortId,callback:function(t){e.$set(e.submitGoodsForm,"goodsSortId",t)},expression:"submitGoodsForm.goodsSortId"}},e._l(e.goodsSortList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:5,offset:9}},[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.saveGoodsInfo}},[e._v("保存")])],1)],1),t("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},a=[],i=(o(7658),o(3505)),r={name:"Add",data(){return{GoodsForm:{},dialogVisible:!0,dialogImageUrl:"",submitGoodsForm:{description:"",goodsSortId:null,goodsImages:[],name:"",price:null},goodsSortList:[],uploadData:{},headers:{},dialogVisible:!1,dialogImageUrl:"",rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"},{max:25,message:"长度不能超过25个字符",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"change"},{validator:this.validatePrice,trigger:"blur"}],description:[{required:!0,message:"请输入产品描述",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}],goodsImages:[{required:!0}],goodsSortId:[{required:!0,message:"请选择商品分类",trigger:"blur"}]}}},mounted(){this.headers={Authorization:(0,i.LP)()},this.getGoodsSortList()},methods:{async getGoodsSortList(){let e=await this.$API.reqGoodsSortList();200==e.code&&(this.goodsSortList=e.data)},async saveGoodsInfo(){let e=await this.$API.reqSaveGoodsInfo(this.submitGoodsForm);200==e.code&&(this.$message({type:"success",message:"添加闲置商品成功！"}),this.$router.replace("/home")),console.log(e)},async handleBeforeUpload(){let e=await this.$API.reqGetFileId("商品");200==e.code&&(this.uploadData.fileUseId=e.data.id)},submitSuccess(e,t,o){this.submitGoodsForm.goodsImages.push(e.data.id)},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleRemove(e,t){const o=this.submitGoodsForm.goodsImages.indexOf(e.response.data.id);o>-1&&this.submitGoodsForm.goodsImages.splice(o,1)},validatePrice(e,t,o){""===t||/^[0-9]+$/.test(t)?o():o(new Error("请输入有效的数字"))}}},l=r,d=o(1001),m=(0,d.Z)(l,s,a,!1,null,"8f3e27ce",null),n=m.exports}}]);
//# sourceMappingURL=136.bac7ae77.js.map